### Volatile

**内存可见性**：在一个线程修改了对象状态后，其他线程能够看到发生的状态变化

Volatile变量，用来确保变量的更新操作通知到其他线程。

把变量声明为volatile后，编译器与运行时都会注意到这个变量是共享的，因此不会将该变量上的操作与其他内存操作一起重排序。
不会被缓存在寄存器或者其他处理器不可见的地方，因此在读取volatile类型变量时总会放回最新写入的值。

与synchronized 相比，不会在读取volatile变量时并不 执行加锁操作，也不会有线程阻塞。

   * 仅当volatile变量能简化代码的实现以及对同步策略的验证时，才应该使用。
   * volatile变量的正确使用方式包括：确保它们自身状态的可见性，确保所引用对象的状态的可见性，以及重要的程序生命周期事件的发生（如初始化或关闭）

当且仅当满足以下所有条件时，才应该使用volatile变量：

* 对变量的写入操作不依赖变量的当前值，或者确保只有单个线程更新变量的值。
* 该变量不会与其他状态变量一起纳入不变性条件中
* 在访问变量时不需要加锁


  **volatile局限性**

  加锁机制既可以确保可见性有可以确保原子性，而volatile变量只能确保可见性。

  因为当多个线程并发对volatile变量同时写数据时，依然存在数据同步问题


  java内存模型要求，变量的读取操作和写入操作都必须是原子操作，对于非volatile类型的long和double变量，JVM允许将64位的读操作或者写操作分解为两个32位的操作。